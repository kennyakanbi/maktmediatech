{% extends "basic.html" %}
{% load static %}
{% block title %}{{ blog.title }}{% endblock title %}

{% block body %}
<main class="main">

  <!-- BLOG HERO -->
  <section class="py-5 bg-light border-bottom">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-9 text-center">
          <h1 class="fw-bold mb-3">{{ blog.title }}</h1>

          <div class="text-muted small">
            <i class="bi bi-calendar"></i>
            {{ blog.date_created|date:"F d, Y" }}
            &nbsp; | &nbsp;
            <i class="bi bi-person"></i>
            {{ blog.author_name }}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- BLOG CONTENT -->
  <section class="py-5">
    <div class="container">
      <div class="row justify-content-center">

        <!-- MAIN CONTENT -->
        <div class="col-lg-8">

          {% if blog.image %}
          <div class="mb-4">
            <img src="{{ blog.image.url }}"
                 class="img-fluid rounded shadow-sm w-100"
                 alt="{{ blog.title }}">
          </div>
          {% endif %}

          <article class="blog-content text-justify">
            {{ blog.description|linebreaks }}
          </article>

          {% if blog.extra_images.all %}
          <div class="row g-3 my-5">
            {% for img in blog.extra_images.all %}
            <div class="col-md-6">
              <img src="{{ img.image.url }}"
                   class="img-fluid rounded shadow-sm w-100"
                   alt="Blog image">
            </div>
            {% endfor %}
          </div>
          {% endif %}

          <!-- Back Button -->
          <div class="mt-5">
            <a href="{% url 'blog_list' %}" class="btn btn-outline-primary btn-sm">
              <i class="bi bi-arrow-left"></i> Back to Blog
            </a>
          </div>

        </div>

        <!-- SIDEBAR -->
        <aside class="col-lg-4 mt-5 mt-lg-0">

          <!-- RECENT POSTS -->
          <div class="card shadow-sm mb-4">
            <div class="card-body">
              <h5 class="fw-bold mb-3">Recent Posts</h5>

              {% for post in blogs %}
              <div class="mb-3">
                <a href="{% url 'blog_detail' post.slug %}" class="text-decoration-none fw-semibold">
                  {{ post.title }}
                </a>
                <div class="small text-muted">{{ post.date_created|date:"M d, Y" }}</div>
              </div>
              {% empty %}
              <p class="small">No posts yet.</p>
              {% endfor %}
            </div>
          </div>

          <!-- SOCIAL SHARE -->
          <div class="card shadow-sm">
            <div class="card-body">
              <h6 class="fw-bold mb-3">Share this post</h6>
              <div class="d-flex gap-2">
                <a href="#" class="btn btn-sm btn-primary">Facebook</a>
                <a href="#" class="btn btn-sm btn-info">Twitter</a>
                <a href="#" class="btn btn-sm btn-secondary">LinkedIn</a>
              </div>
            </div>
          </div>

        </aside>

      </div>
    </div>
  </section>

</main>

<style>
.blog-content p {
    margin-bottom: 1.3rem;
    line-height: 1.8;
}
.text-justify {
    text-align: justify;
}
@media (max-width: 768px) {
    h1 {
        font-size: 1.7rem;
    }
}
</style>
{% endblock body %}
